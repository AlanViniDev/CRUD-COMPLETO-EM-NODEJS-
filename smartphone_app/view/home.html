<!DOCTYPE html>
<html lang = "pt-br">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <body > 
        <h2> Cadastro </h2>
        <form action="./create" method = "POST" id = "criar">
            <div id = "criar"></div>
            <label> ID: </label>
            <input name = "_id" type = "text" placeholder="Digite o ID"/>
            <br/>
            <br/>
            <label>Nome:</label>
            <input name = "nome" type = "text"  placeholder="Digite o nome do produto"/>
            <br/>
            <br/>
            <label>Marca:</label>
            <input name = "marca" type = "text"  placeholder="Digite a marca do produto"/>
            <br/>
            <br/>  
            <button name = "botao" type = "submit" >Confirmar</button>
        </form>
        <script  src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script>
            $(document).ready(function  () {
                $("#criar").on("submit",function  (e) {
                    e.preventDefault();
                    console.log();
                    $.post("./create",$(this).serialize(), function( data ) {
                        console.log(data);
                    });
                })
            });
        </script>
        <br/>
        <script  type = "text/javascript">
        /*
            fetch('http://localhost:3000/smartphone').then((res)=>{
            return res.json();
            }).then((json) => {
            let x = [2];
            for (var i = 0; i <= 6; i++){
            x[i] = json[i];
            document.getElementById("demo2").innerHTML = (JSON.stringify(x,null,4));
            //document.getElementById("demo2").innerHTML = (JSON.stringify(x,null,4+"<br//>"));
            }
            //res.send("Resultado"+ (JSON.stringify(x,null,4)));
             // res.send("Resultado: " + innerHTML(ajax,null,4));
        }); */
        </script>

<h2> Atualizar </h2>
<form action="./update" method = "POST" id = "atualizar">
    <label> ID: </label>
    <input name = "_id" type = "text" placeholder="Digite o ID"/>
    <br/>
    <br/>
    <label>Nome:</label>
    <input name = "nome" type = "text"  placeholder="Digite o nome do produto"/>
    <br/>
    <br/>
    <label>Marca:</label>
    <input name = "marca" type = "text"  placeholder="Digite a marca do produto"/>
    <br/>
    <br/>  
    <button name = "botao" type = "submit" >Confirmar</button>
</form>

<script>
    $(document).ready(function  () {
        $("#atualizar").on("submit",function  (e) {
            e.preventDefault();
            console.log();
            $.post("./update",$(this).serialize(), function(data) {
                console.log(data);
            });
        })
    });
</script>


<h2> Excluir </h2>
<form action="./delete" method = "POST" id = "deletar">
    <label> ID: </label>
    <input name = "_id" type = "text" placeholder="Digite o ID"/>
    <button name = "botao" type = "submit" >Confirmar</button>
</form>

<script>
    $(document).ready(function  () {
        $("#deletar").on("submit",function  (e) {
            e.preventDefault();
            console.log();
            $.post("./delete",$(this).serialize(), function(data) {
                console.log(data);
            });
        })
    });
</script>

    <form action = "./listar" method = "GET" id = "listar">
            <h2>Listar</h2>
            <div id = "dados"></div>
            <button name = "botao" type = "submit" id = "button" >Confirmar</button>
    </form>


    <script>
        $(document).ready(function  () {
            $("#listar").on("submit",function  (e) {
                e.preventDefault();
                $.get("./listar",$(this).serialize(), function  (data) {
                    //console.log(data);
                    //var txt = '{"name":"John", "age":30, "city":"New York"}'; 
                    //var dados1 = JSON.parse(txt);
                    //var dado = JSON.parse(txt);
                    //document.getElementById("dados").innerHTML = dados1.name;
                
                       for (var j = 0; j <= 20; j++) {

                            var _id = JSON.stringify(data[j]._id);
                            var _id = JSON.parse(_id);

                            var nome = JSON.stringify(data[j].nome);
                            var nome = JSON.parse(nome);

                            var marca = JSON.stringify(data[j].marca);
                            var marca = JSON.parse(marca);  

                         document.getElementById("dados").innerHTML +=  ( "<br/>" + _id + "<br/>" + nome + "<br/>" + marca ); 
                         button.disabled = true;
                       } 

                    // JSON.stringify(data[0].marca);
                    /*
                    var texto = (JSON.stringify(data,null,4));
                    document.getElementById("dados").innerHTML = texto;*/
                
                })
            })
        });
    
    </script>

    <!--
    <div id = "demo">
        <script type = "text/javascript"> 
            //const fetch = require('node-fetch');
           fetch('https://swapi.dev/api/people/1').then((res)=>{
            return res.json();
            }).then((json) => {
                var x = json;
               //document.write(JSON.stringify(x,null,4));
               document.getElementById("demo").innerHTML = (JSON.stringify(x,null,4));
            });
        </script>
    </div>
--> </body>
    </html> 